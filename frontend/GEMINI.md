# Gemini Context: Frontend

-- NEVER TOUCH on @../backend/ folder

This file provides context for the AI agent regarding the `frontend` directory of the `bookstore-fullstack` project.

## Project Overview

This is a modern web application frontend built with **Next.js 15** and **React 19**. It utilizes the **App Router** for routing and **TypeScript** for type safety. The UI is constructed using **Shadcn UI** components styled with **Tailwind CSS 4**.

### Key Technologies

- **Framework:** [Next.js 15.5.10](https://nextjs.org/) (App Router)
- **Library:** [React 19.1.0](https://react.dev/)
- **Language:** [TypeScript](https://www.typescriptlang.org/)
- **Styling:** [Tailwind CSS 4](https://tailwindcss.com/)
- **Component Library:** [Shadcn UI](https://ui.shadcn.com/) (configured with `new-york` style and `stone` base color)
- **Icons:** [Lucide React](https://lucide.dev/)
- **Form Management:** [React Hook Form](https://react-hook-form.com/)
- **Validation:** [Zod](https://zod.dev/)
- **Data Fetching:** [TanStack Query v5](https://tanstack.com/query/latest) (React Query)
- **HTTP Client:** [Axios](https://axios-http.com/)
- **Toasts:** [Sonner](https://sonner.emilkowal.ski/)

### Architecture

> [!IMPORTANT]
> **SSR Data Fetching:** Para páginas que necessitam de dados pré-carregados (SEO), faça o fetch no Server Component usando `process.env.API_URL` (server-side) e passe como `initialData` para o hook do TanStack Query. Exemplo: `page.tsx` faz fetch SSR e passa para `HomeMain` que repassa ao `useBooks({ initialData })`.

The project follows the standard Next.js App Router directory structure within the `src` folder, with additional folders for organization:

- `ai-files`: Contains file to use as context for the AI agent to create pages and components.
- `src/app/`: Contains the application routes, layouts, and pages.
  - `src/app/auth/`: Authentication related routes.
    - `src/app/auth/page.tsx`: Login page (main auth entry).
    - `src/app/auth/register/page.tsx`: Registration page.
  - `src/app/globals.css`: Global CSS styles and Tailwind directives.
  - `src/app/layout.tsx`: Root layout (configured for `pt-br`).
- `src/components/`: Reusable UI components.
  - `src/components/ui/`: Primitive UI components generated by Shadcn UI (e.g., button, input, slider, sonner).
  - `src/components/header.tsx`: Global header with logo, navigation, cart, and auth buttons.
- `src/modules/`: Feature-based logic following an MVVM-like pattern.
  - `src/modules/login/`: Login feature module.
  - `src/modules/register/`: Registration feature module.
  - `src/modules/home/`: Home page feature module.
    - `src/modules/home/schemas/`: Zod schemas (book.schema.ts, category.schema.ts).
    - `src/modules/home/hooks/`: TanStack Query hooks and query-keys helper.
      - `query-keys.ts`: SST pattern for centralized query keys.
      - `use-books.ts`: Hook for fetching books with filters.
      - `use-categories.ts`: Hook for fetching categories (graceful fallback).
    - `src/modules/home/components/`: UI components (hero-section, book-filter, book-card, book-grid, footer, main).
- `src/lib/`: Utility functions and client configurations.
  - `src/lib/utils.ts`: Contains the `cn` utility for merging Tailwind classes.
  - `src/lib/axios.ts`: Configured Axios instance for API communication.
- `src/providers/`: Application context providers (e.g., `query-provider.tsx`).
- `src/validators/`: Reusable Zod validation rules and helper constants.
- `public/`: Static assets.

## Building and Running

The project uses `npm` for dependency management and script execution. Turbopack is enabled by default for development and building.

### Key Commands

- **Install Dependencies:**

  ```bash
  npm ci
  ```

- **Start Development Server:**

  ```bash
  npm run dev ## never run this
  # Runs: next dev --turbopack
  ```

  The server typically starts at `http://localhost:3000`.

- **Build for Production:**

  ```bash
  npm run build
  # Runs: next build --turbopack
  ```

- **Start Production Server:**

  ```bash
  npm run start
  # Runs: next start
  ```

- **Linting:**
  ```bash
  npm run lint
  # Runs: eslint
  ```

## Development Conventions

- **Language & Localization:** The application is localized to Brazilian Portuguese (`pt-br`). All UI strings, toast messages, and validation errors should be in Portuguese.
- **Feature-based Modularization:** Organize business logic and feature-specific components within `src/modules`. Each module should follow an MVVM-like pattern where hooks act as ViewModels.
- **Component Composition:** Prefer using Shadcn UI components from `@/components/ui` as building blocks for complex interfaces.
- **Styling:** Use Tailwind CSS utility classes. Avoid writing custom CSS in `globals.css` unless absolutely necessary.
- **Class Merging:** Always use the `cn(...)` utility function (imported from `@/lib/utils`) when combining conditional class names to ensure Tailwind classes are merged correctly (resolving conflicts via `tailwind-merge`).
- **Type Safety:** Ensure all components and functions are strictly typed.
- **Forms:** Use `react-hook-form` coupled with `zod` for schema validation for all form implementations. @../backend/src/modules/\*\*/dto have files to copy and use on front end. never create schemas from scratch.
- **Data Fetching:** Use TanStack Query (React Query) via the `QueryProvider` for all server-state management.
- **Validation:** Utilize reusable validators from `src/validators/zod.validators.ts` (e.g., `zodSafeString`, `zodSafeEmail`) to ensure consistency and security.
- **Notifications:** Use the `toast` function from `sonner` for user feedback.
- **Imports:** Use path aliases defined in `tsconfig.json` and `components.json`:
  - `@/components` -> `src/components`
  - `@/lib` -> `src/lib`
  - `@/utils` -> `src/lib/utils`
  - `@/ui` -> `src/components/ui`
  - `@/modules` -> `src/modules`
  - `@/validators` -> `src/validators`
